# Referral Program

UnAI offers an approval-based referral affiliate program that rewards users who bring new depositors to the platform. This page explains how it works, how to get your referral code, and how earnings are calculated.

---

## How the Referral System Works

The referral program is an **affiliate model**. Referral code holders earn a commission from the protocol's fee share when referred users generate trading fees. Importantly, **referred users pay no extra fees** -- they pay the standard 30% performance fee like everyone else.

### The Basic Flow

1. You apply for a referral code through the UnAI app.
2. The platform reviews and approves your application.
3. Once approved, you receive a unique referral code and link.
4. You share your referral link with others.
5. When someone uses your link and deposits, they are registered under your code.
6. As the vault earns fees from their deposits, you earn a commission from the **protocol's 30% share**.

---

## Getting Your Referral Code

Referral codes are issued through an **approval process**. To apply:

1. Visit [un-ai.io/app](https://un-ai.io/app) and connect your wallet.
2. Click the **"Referral"** button (gift icon) in the header.
3. Fill in the application form:
   - **X (Twitter) ID** -- Your social media handle for verification.
   - **Email** -- Your contact email.
4. Submit the application.
5. Wait for approval. Your application status will be displayed:
   - **Pending** -- Under review.
   - **Approved** -- Your code has been generated and is ready to use.
   - **Rejected** -- Your application was not approved. You may reapply.

Once approved, your referral code is displayed on the app dashboard. The code is auto-generated in the format `REF` + the first 6 hex characters of your wallet address (uppercase).

Your referral link format:
```
https://un-ai.io/app?utm_id=YOUR_CODE
```

Share this link with anyone you want to refer.

---

## Applying a Referral Code

When a new user visits UnAI through your referral link:

1. The referral code is automatically detected from the URL parameter `?utm_id=CODE`.
2. The code is validated against the platform to confirm it exists and is active.
3. When they connect their wallet, the code is linked to their account.
4. This association is **permanent** -- once registered, it cannot be changed.

### Important Rules

> **Code validation.** Invalid or inactive codes are rejected immediately. The user will see an error message if the code does not exist.

> **One-time registration.** Once a referral code is linked to a wallet, it cannot be changed or removed.

> **Register before depositing.** The referral link should be visited and wallet connected **before** making the first deposit to ensure proper registration.

---

## How Earnings Work

Referral earnings come from the **protocol's 30% fee share**, not from the referred user's 70% share. This means referred users are not penalized in any way.

### Earning Calculation

After each daily harvest, the bot calculates referral commissions:

```
1. Harvest collects trading fees from Uniswap V3
2. Protocol receives 30% as WETH (sent to feeRecipient)
3. Bot records the WETH balance change (delta)
4. For each referred user:
   - userProportion = userShares / totalSupply
   - estimatedUserFee = delta * userProportion
   - ownerCommission = estimatedUserFee * codeSharePercent
5. Commission recorded as pending distribution
6. Operator reviews and sends WETH to code owners
```

### Example

Suppose:
- The daily harvest collects 0.1 WETH in total fees
- Protocol share (30%): 0.03 WETH
- Your referred user holds 10% of total vault shares
- Your code's commission rate is 10%

Your earnings:
```
Referred user's estimated fee contribution = 0.03 * 10% = 0.003 WETH
Your commission = 0.003 * 10% = 0.0003 WETH
```

This compounds daily as long as the referred user has deposits in the vault.

---

## Commission Rates

The commission rate (share percentage) is set per referral code by the platform admin. Common rates:

| Commission Rate | Description |
|---|---|
| 10% | Standard affiliate rate |
| 20% | Partner rate |
| 30% | Premium partner rate |

> **Note:** The commission rate determines what percentage of the protocol's fee share generated by referred users goes to the code owner.

---

## Distribution Schedule

Referral commissions follow a deferred distribution schedule for safety:

| Phase | Timing | Description |
|---|---|---|
| Harvest | Daily (midnight UTC) | Fees collected, WETH delta recorded |
| Delay | 24 hours | Safety window before distribution calculation |
| Calculation | Hourly check | Pending harvests processed after 24h |
| Distribution | Manual | Operator reviews pending amounts and sends WETH |

Commissions are paid in **WETH** directly to the code owner's wallet by the platform operator.

---

## Summary

| Participant | What They Get |
|---|---|
| **Referred user** | Standard 30% fee rate (no extra cost) |
| **Code owner** | Commission from protocol's 30% share, paid in WETH |
| **Protocol** | Wider user base through referral growth |

| Feature | Detail |
|---|---|
| Commission currency | WETH |
| Distribution frequency | Daily (with 24h delay, manual operator review) |
| Commission source | Protocol's 30% fee share |
| Registration | One-time, permanent |
| Code format | Auto-generated on approval (`REF` + wallet prefix) |
| Application required | Yes (X ID + email) |

---

## Related Guides

- [Getting Started](./getting-started.md)
- [How to Deposit and Withdraw](./deposit-withdraw.md)
- [Understanding Lock Periods](./lock-periods.md)
- [FAQ](../faq.md)
